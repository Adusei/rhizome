<div id="management-dashboard">

	<div class="row print-only">
		<div class="small-12 columns">
			<h1>
				<span v-if="campaign" class="campaign">{{ campaign.start_date | date 'MMMM YYYY' }}</span>
				<span v-if="region" class="region">{{ region.name }}</span>
			</h1>
			<h2>
				Polio<br />
				Performance<br />
				Dashboard
			</h2>
			<img src="/static/img/UNICEF.svg" class="logo"/>
		</div>
	</div>

	<div class="row">
		<div class="medium-2 columns">
			<h3>Impact</h3>

			<section>
				<h4>
					<span v-if="cases != null">
						Polio cases in {{ campaign.start_date | date 'YYYY' }}
						(as of {{ campaign.start_date | date 'MMM' }}):
						<span style="color:#2b8cbe;float:right;font-weight:bold">{{ cases }}</span>
					</span>
					<span v-if="cases == null">
						Polio Cases
					</span>
				</h4>
				<div style="position:relative">
					<div
						v-if="newCases != null">
						<p id="new-polio-cases">{{ newCases }} new {{ newCases | pluralize case }}</p>
					</div>
					<div
						id="polio-cases-ytd"
						v-component="chart-ytd"
						data-aspect="1.757"
						data-margin-top="24"
						data-margin-bottom="24"
						data-indicators="[168]"
						data-period="2 years"
						v-with="campaign: campaign, region: region"></div>
				</div>
			</section>

			<section>
				<h4>Under-Immunized Children</h4>
				<svg
					id="immunity-gap"
					v-component="chart-stacked-column"
					data-margin-bottom="24"
					data-aspect="1.609"
					data-margin-top="24"
					data-margin-bottom="24"
					data-format-string="%"
					data-x="campaign.start_date"
					data-x-label="[Q]Q YYYY"
					v-with="loading : false, series : immunity, region : region, campaign : campaign"></svg>
			</section>
		</div>

		<div>
			<div class="medium-5 columns">
				<h3>Performance of Front Line Workers</h3>
			</div>

			<div class="medium-2 columns">

				<section>
					<h4>Missed Children</h4>
					<svg
						id="missed-children"
						v-component="chart-stacked-column"
						data-margin-top="24"
						data-margin-bottom="24"
						data-aspect="1.909344491"
						data-margin-bottom="12"
						data-format-string=".1%"
						data-x="campaign.start_date"
						v-with="loading : false, series : missedChildren, region: region, campaign: campaign"></svg>
				</section>

				<section>
					<h4>Conversions</h4>
					<div
						id="conversions"
						v-component="chart-line"
					 	data-aspect="2.260237781"
						data-margin-top="24"
						data-margin-bottom="24"
					 	data-period="1 years"
					 	data-indicators="[187,189]"
					 	data-format-string="%"
					 	v-with="campaign: campaign, region: region"></div>
				</section>

				<section>
					<table class="pie-charts" v-if="microplans.available">
						<tbody>
							<tr>
								<td>
									<div v-component="chart-pie"
										style="width:18px;height:18px"
										data-width="18"
										data-height="18"
									   v-with="
									   	datapoints : microplans.data,
									   	domain     : microplans.domain,
									   	loading    : false
									   "></div>
								</td>

								<td>{{ microplans.data[0].value }} / {{ microplans.domain[1] }}
									microplans incorporate social data</td>
							</tr>
						</tbody>
					</table>
					<p v-if="!microplans.available">No microplan data available.</p>
				</section>

			</div>

			<div class="medium-2 columns">
				<h4>Missed Children</h4>
				<div
					id="missed-children-map"
					v-component="chart-choropleth"
				  v-with="region: region, campaign: campaign"
				  data-indicator="475"
				  data-aspect="1"
				  data-range="[0, 0.1]">
				</div>
			</div>

			<div class="transit-points medium-1 column">
				<h4>Transit Points</h4>

				<p v-if="transitPoints.showVaccinated">
					<strong>{{ transitPoints.vaccinated | num }}</strong>
					children vaccinated at transit points
				</p>

				<table class="pie-charts">
					<tbody>
						<tr v-if="transitPoints.showInPlace">
							<td>
								<div
									v-component="chart-pie"
									v-with="datapoints: transitPoints.pctInplace, loading: false"
									data-width="18"
									data-height="18"></div>
							</td>
							<td>
								{{ transitPoints.inPlace }} / {{ transitPoints.planned }}
								in place
							</td>
						</tr>

						<tr v-if="transitPoints.showWithSM">
							<td>
								<div
									v-component="chart-pie"
									v-with="datapoints: transitPoints.pctWithSM, loading: false"
									data-width="18"
									data-height="18"></div>
							</td>
							<td>
								{{ transitPoints.withSM }} / {{ transitPoints.inPlace }} have a
								social mobilizer
							</td>
						</tr>
					</tbody>
				</table>

				<h6>Missed Children</h6>

				<svg class="legend reds" viewBox="0 0 177 84">
					<g>
						<rect width="11" height="11" class="q-6"></rect>
						<text dx="14" dy="9">10+%</text>
					</g>
					<g transform="translate(0,14)">
						<rect width="11" height="11" class="q-5"></rect>
						<text dx="14" dy="9">8&ndash;9%</text>
					</g>
					<g transform="translate(0,28)">
						<rect width="11" height="11" class="q-4"></rect>
						<text dx="14" dy="9">6&ndash;7%</text>
					</g>
					<g transform="translate(0,42)">
						<rect width="11" height="11" class="q-3"></rect>
						<text dx="14" dy="9">4&ndash;5%</text>
					</g>
					<g transform="translate(0,56)">
						<rect width="11" height="11" class="q-2"></rect>
						<text dx="14" dy="9">2&ndash;3%</text>
					</g>
					<g transform="translate(0,70)">
						<rect width="11" height="11" class="q-1"></rect>
						<text dx="14" dy="9">0&ndash;1%</text>
					</g>
				</ul>
			</div>
		</div>
	</div>

	<div class="row">
		<section class="medium-2 columns">
			<h3>FLWs' Capacity to Perform</h3>
			<ul class="small-block-grid-2">
				<li v-repeat="indicator: capacity"
				    v-with="campaign: campaign, region: region">
					<div v-component="chart-bullet"
				       v-with="indicators: indicator, campaign: campaign, region: region"
				       data-aspect="3"
				       data-period="5 months"></div>
				</li>
			</ul>
		</section>

		<div class="medium-1 column">
			<h3>Supply</h3>
			<ul class="small-block-grid-2 medium-block-grid-1">
				<li v-repeat="indicator: supply">
					<div v-component="chart-bullet"
					     data-aspect="3.177"
					     data-period="5 months"
					     v-with="indicators: indicator, campaign: campaign, region: region"></div>
				</li>
			</ul>
		</div>

		<div class="medium-1 column">
			<h3>Polio+</h3>
			<ul class="small-block-grid-2 medium-block-grid-1">
				<li v-repeat="indicator: polio">
					<div v-component="chart-bullet"
					     data-aspect="3.177"
					     data-period="5 months"
					     v-with="indicators: indicator, campaign: campaign, region: region"></div>
				</li>
			</ul>
		</div>

		<div class="medium-1 column">
			<h3>Resources</h3>
			<ul class="small-block-grid-2 medium-block-grid-1">
				<li v-repeat="indicator: resources"
				    v-with="campaign: campaign, region: region">
					<div v-component="chart-bullet"
					     data-aspect="3.177"
					     data-period="5 months"
					     v-with="indicators: indicator, campaign: campaign, region: region"></div>
				</li>
			</ul>
		</div>

		<div class="medium-2 columns">
			<h3>Access Challenged Districts</h3>
			<h6>Number of Inaccessible Children</h6>
			<div v-component="chart-line"
			     data-aspect="2.665"
			     data-period="1 years"
			     data-indicators="[158]"
					 data-margin-top="24"
					 data-margin-bottom="24"
			     v-with="campaign: campaign, region: region"></div>

			<div class="row">
				<div class="medium-3 columns">
					<h6 style="text-overflow:initial;white-space:normal">Districts with Access Plan</h6>
					<div class="labeled-donut">
						<div v-component="chart-pie"
								 data-indicators="[174]"
								 data-width="150"
								 data-height="150"
								 data-inner-radius="45"
								 v-with="campaign: campaign, region: region"></div>

						<p class="donut-label"></p>
					</div>
				</div>
				<div class="medium-4 columns">
					<h6>Inaccessibility Breakdown</h6>
					<table class="accessibility pie-charts">
						<tr v-repeat="inaccessibility"
							v-class="hide-for-print : hiddenForPrint">
							<td>
								<div v-component="chart-pie"
									data-width="12"
									data-height="12"
									v-with="
										datapoints : datapoints,
										loading    : false"></div>
							</td>
							<td style="text-align:right">{{ value }}</td>
							<td>{{ name }}</td>
						</tr>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>
