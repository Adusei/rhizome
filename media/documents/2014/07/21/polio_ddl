BEGIN;
CREATE TABLE "datapoint_indicator" (
    "id" serial NOT NULL PRIMARY KEY,
    "name" varchar(55) NOT NULL,
    "description" varchar(255) NOT NULL,
    "is_reported" boolean NOT NULL,
    "parent_indicator_id_id" integer NOT NULL REFERENCES "datapoint_indicator" ("id") DEFERRABLE INITIALLY DEFERRED,
    "created_at" timestamp with time zone NOT NULL
)
;
CREATE TABLE "region" (
    "id" serial NOT NULL PRIMARY KEY,
    "full_name" varchar(255) NOT NULL,
    "short_name" varchar(55) NOT NULL,
    "description" varchar(255),
    "parent_region_id_id" integer NOT NULL REFERENCES "region" ("id") DEFERRABLE INITIALLY DEFERRED,
    "shape_file_path" varchar(255),
    "latitude" numeric(12, 10),
    "longitude" numeric(13, 10),
    "created_at" timestamp with time zone NOT NULL
)
;
CREATE TABLE "datapoint" (
    "id" serial NOT NULL PRIMARY KEY,
    "indicator_id" integer NOT NULL REFERENCES "datapoint_indicator" ("id") DEFERRABLE INITIALLY DEFERRED,
    "region_id" integer NOT NULL REFERENCES "region" ("id") DEFERRABLE INITIALLY DEFERRED,
    "value" integer NOT NULL,
    "note" varchar(255),
    "created_at" timestamp with time zone NOT NULL
)
;

COMMIT;